const Smb2 = require('./');

const noop = Function.prototype;

async function main([share, username, password, domain = 'WORKGROUP']) {
  const smb2 = new Smb2({ share, username, password, domain });
  try {
    // await smb2.rmdir('plop').catch(noop);
    // await smb2.unlink('plop').catch(noop);
    // await smb2.close(await smb2.open('plop', 'w'));
    // console.log('opened')

    console.log(await smb2.readdir(''));
  } finally {
    smb2.disconnect();
  }
}
main(process.argv.slice(2)).then(() => {
  console.log('ok');
}, console.error.bind(console, 'nok'));
